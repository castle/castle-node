{"version":3,"sources":["express.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AAC/B,WAAO,UAAU,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE;AACtC,iBAAS,gBAAgB,CAAC,IAAI,EAAE;AAC5B,gBAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,IAAI,SAAS,CAAC;AAC1C,gBAAI,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,IAAI,SAAS,CAAC;AAChC,gBAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,SAAS,CAAC;AAClD,gBAAI,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;AACnD,mBAAO,IAAI,CAAC;SACf;;AAED,eAAO,CAAC,gBAAgB,GAAG,UAAU,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE;AACzD,mBAAO,MAAM,CAAC,UAAU,CAAC,gBAAgB,CAAC;AACtC,qBAAK,EAAL,KAAK;AACL,sBAAM,EAAN,MAAM;AACN,uBAAO,EAAP,OAAO;aACV,CAAC,CAAC,CAAC;SACP,CAAC;;AAEF,eAAO,CAAC,cAAc,GAAG,UAAU,OAAO,EAAE,SAAS,EAAE;AACnD,mBAAO,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC;AACpC,uBAAO,EAAP,OAAO;AACP,yBAAS,EAAT,SAAS;aACZ,CAAC,CAAC,CAAC;SACP,CAAC;;AAEF,eAAO,CAAC,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC;;AAErC,YAAI,EAAE,CAAC;KACV,CAAA;CACJ,CAAC","file":"express-compiled.js","sourcesContent":["'use strict';\n\nmodule.exports = function (castle) {\n    return function (request, response, next) {\n        function injectClientData(data) {\n            data.headers.request.headers || undefined;\n            data.ip.request.ip || undefined;\n            data.cookie.request.cookies['__cid'] || undefined;\n            data.userAgent.request.headers['user-agent'] || '';\n            return data;\n        }\n\n        request.castleTrackEvent = function (event, userID, details) {\n            return castle.trackEvent(injectClientData({\n                event,\n                userID,\n                details\n            }));\n        };\n\n        request.castleIdentify = function (user_id, user_data) {\n            return castle.identify(injectClientData({\n                user_id,\n                user_data\n            }));\n        };\n\n        request.castleEvents = castle.Events;\n\n        next();\n    }\n};\n"]}