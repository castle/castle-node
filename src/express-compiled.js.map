{"version":3,"sources":["express.js"],"names":[],"mappings":"AAAA;;AAEA,OAAO,OAAP,GAAiB,UAAU,MAAV,EAAkB,MAAlB,EAA0B;AACvC,WAAO,UAAU,OAAV,EAAmB,QAAnB,EAA6B,IAA7B,EAAmC;AACtC,iBAAS,gBAAT,CAA0B,IAA1B,EAAgC;AAC5B,iBAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,IAAgC,SAAhC,CAD4B;AAE5B,iBAAK,EAAL,CAAQ,OAAR,CAAgB,EAAhB,IAAsB,SAAtB,CAF4B;AAG5B,iBAAK,MAAL,CAAY,OAAZ,CAAoB,OAApB,CAA4B,OAA5B,KAAwC,SAAxC,CAH4B;AAI5B,iBAAK,SAAL,CAAe,OAAf,CAAuB,OAAvB,CAA+B,YAA/B,KAAgD,EAAhD,CAJ4B;AAK5B,mBAAO,IAAP,CAL4B;SAAhC;;AAQA,gBAAQ,gBAAR,GAA2B,UAAU,KAAV,EAAiB,MAAjB,EAAyB,OAAzB,EAAkC;AACzD,mBAAO,OAAO,UAAP,CAAkB,iBAAiB;AACtC,4BADsC;AAEtC,8BAFsC;AAGtC,gCAHsC;aAAjB,CAAlB,CAAP,CADyD;SAAlC,CATW;;AAiBtC,gBAAQ,cAAR,GAAyB,UAAU,OAAV,EAAmB,SAAnB,EAA8B;AACnD,mBAAO,OAAO,QAAP,CAAgB,iBAAiB;AACpC,gCADoC;AAEpC,oCAFoC;aAAjB,CAAhB,CAAP,CADmD;SAA9B,CAjBa;;AAwBtC,gBAAQ,YAAR,GAAuB,MAAvB,CAxBsC;;AA0BtC,eA1BsC;KAAnC,CADgC;CAA1B","file":"express-compiled.js","sourcesContent":["'use strict';\n\nmodule.exports = function (castle, events) {\n    return function (request, response, next) {\n        function injectClientData(data) {\n            data.headers.request.headers || undefined;\n            data.ip.request.ip || undefined;\n            data.cookie.request.cookies['__cid'] || undefined;\n            data.userAgent.request.headers['user-agent'] || '';\n            return data;\n        }\n\n        request.castleTrackEvent = function (event, userID, details) {\n            return castle.trackEvent(injectClientData({\n                event,\n                userID,\n                details\n            }));\n        };\n\n        request.castleIdentify = function (user_id, user_data) {\n            return castle.identify(injectClientData({\n                user_id,\n                user_data\n            }));\n        };\n\n        request.castleEvents = events;\n\n        next();\n    }\n};\n"]}