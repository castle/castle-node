{"version":3,"sources":["express-compiled.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AAC/B,WAAO,UAAU,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE;AACtC,iBAAS,gBAAgB,CAAC,IAAI,EAAE;AAC5B,gBAAI,CAAC,OAAO,GAAK,OAAO,CAAC,OAAO,IAAI,SAAS,CAAC;AAC9C,gBAAI,CAAC,EAAE,GAAU,OAAO,CAAC,EAAE,IAAI,SAAS,CAAC;AACzC,gBAAI,CAAC,MAAM,GAAM,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,SAAS,CAAC;AACvD,gBAAI,CAAC,SAAS,GAAG,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;AACrD,mBAAO,IAAI,CAAC;SACf;;AAED,eAAO,CAAC,gBAAgB,GAAG,UAAU,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE;AACzD,mBAAO,MAAM,CAAC,UAAU,CAAC,gBAAgB,CAAC;AACtC,qBAAK,EAAK,KAAK;AACf,sBAAM,EAAI,MAAM;AAChB,uBAAO,EAAG,OAAO;aACpB,CAAC,CAAC,CAAC;SACP,CAAC;;AAEF,eAAO,CAAC,kBAAkB,GAAG,UAAU,OAAO,EAAE,SAAS,EAAE;AACvD,mBAAO,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC;AACpC,uBAAO,EAAK,OAAO;AACnB,yBAAS,EAAG,SAAS;aACxB,CAAC,CAAC,CAAC;SACP,CAAC;;AAEF,eAAO,CAAC,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC;;AAErC,YAAI,EAAE,CAAC;KACV,CAAC;CACL;;;AAAC","file":"express-compiled-compiled.js","sourcesContent":["'use strict';\n\nmodule.exports = function (castle) {\n    return function (request, response, next) {\n        function injectClientData(data) {\n            data.headers   = request.headers || undefined;\n            data.ip        = request.ip || undefined;\n            data.cookie    = request.cookies['__cid'] || undefined;\n            data.userAgent = request.headers['user-agent'] || '';\n            return data;\n        }\n\n        request.castleTrackEvent = function (event, userID, details) {\n            return castle.trackEvent(injectClientData({\n                event   : event,\n                userID  : userID,\n                details : details\n            }));\n        };\n\n        request.castleIdentifyUser = function (user_id, user_data) {\n            return castle.identify(injectClientData({\n                user_id   : user_id,\n                user_data : user_data\n            }));\n        };\n\n        request.castleEvents = castle.Events;\n\n        next();\n    };\n};\n\n//# sourceMappingURL=express-compiled.js.map"]}